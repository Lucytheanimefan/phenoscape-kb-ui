<h2><span class="badge">Taxon</span> <taxon-name iri="taxonID"></taxon-name> <small>{{taxonID | prefixedURI}}</small></h2>
<div class="row">
    <div class= "col-sm-12">
        <tabset>
            <tab heading="Classification" active="tabs.classification.active" select="activateTab('classification')">
                <div class="panel panel-default top-buffer">
                    <div class="panel-body">
                        <classification iri="taxonID" link-filter="linkToTaxon"></classification>
                    </div>
                </div>
            </tab>
            <tab active="tabs.phenotypes.active" select="activateTab('phenotypes')">
                <tab-heading>Phenotypes <span class="badge">{{phenotypeProfileTotal.total}}</span></tab-heading>
                <div class="panel panel-default top-buffer">
                    <div class="panel-heading">
                        <h4>Phenotypes directly annotated to this taxon</h4>
                    </div>
                    <div class="panel-body">
                        <p>These phenotypes have been annotated from character states directly associated with <mark>{{taxon.label}}</mark> in source data.</p>
                        <div class="well">
                            <form class="form-inline">
                                <div class="form-group" ng-class="{'has-success': filters.phenotypesEntityFilter, 'has-feedback': filters.phenotypesEntityFilter}">
                                    <label for="entityInputPhenotypes">Entity</label>
                                    <input id="entityInputPhenotypes" type="text" ng-model="filters.phenotypesEntityFilter" placeholder="anatomical entity" typeahead="entity as entity.label for entity in autocompleteEntity($viewValue)" typeahead-loading="loadingEntityPhenotypes" typeahead-wait-ms="300" typeahead-editable="false" class="form-control">
                                    <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-show="filters.phenotypesEntityFilter"></span>
                                    <i ng-show="loadingEntityPhenotypes" class="glyphicon glyphicon-refresh"></i>
                                </div>
                                <div class="form-group" ng-class="{'has-success': filters.phenotypesQualityFilter, 'has-feedback': filters.phenotypesQualityFilter}">
                                    <label for="qualityInputPhenotypes">Quality</label>
                                    <input id="qualityInputPhenotypes" type="text" ng-model="filters.phenotypesQualityFilter" placeholder="phenotypic quality" typeahead="quality as quality.label for quality in autocompleteQuality($viewValue)" typeahead-loading="loadingQualityPhenotypes" typeahead-wait-ms="300" typeahead-editable="false" class="form-control">
                                    <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-show="filters.phenotypesQualityFilter"></span>
                                    <i ng-show="loadingQualityPhenotypes" class="glyphicon glyphicon-refresh"></i>
                                </div>
                            </form>
                        </div>
                    </div>
                    <table class="table table-condensed table-striped" cg-busy="phenotypeProfile.$promise">
                        <thead>
                            <tr>
                                <th>Ontology Annotation</th>
                                <th>Character Description</th>
                                <th>Source</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="annotation in phenotypeProfile.results">
                                <td><span title="{{annotation.phenotype['@id']}}">{{annotation.phenotype.label}}</span></td>
                                <td><span title="{{annotation['@id']}}">{{annotation.description}}</span></td>
                                <td><span title="{{annotation.matrix['@id']}}">{{annotation.matrix.label}}</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <pagination total-items="phenotypeProfileTotal.total" ng-model="phenotypeProfilePage" max-size="phenotypeProfileMaxSize" class="pagination-sm" boundary-links="true" rotate="false"  items-per-page="phenotypeProfileLimit" cg-busy="phenotypeProfileTotal.$promise" ng-change="phenotypeProfilePageChanged(phenotypeProfilePage)"></pagination>
            </tab>
            <tab active="tabs.variation.active" select="activateTab('variation')">
                <tab-heading>Variation profile <span class="badge">{{variationProfileTotal.total}}</span></tab-heading>
                <div class="panel panel-default top-buffer">
                    <div class="panel-heading">
                        <h4>Phenotypes varying among immediate children of this taxon</h4>
                    </div>
                    <div class="panel-body">
                        <p>These phenotypes have been associated with the variation profile of <mark>{{taxon.label}}</mark> using an ancestral state reconstruction method.</p>
                    </div>
                    <table class="table table-condensed table-striped" cg-busy="variationProfile.$promise">
                        <thead>
                            <tr>
                                <th>Character Description</th>
                                <th>Source</th>
                                <th>Ontology Annotation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="annotation in variationProfile.results">
                                <td><span title="annotation['@id']">{{annotation.description}}</span></td>
                                <td><span title="annotation.matrix['@id']">{{annotation.matrix.label}}</span></td>
                                <td><span title="annotation.phenotype['@id']">{{annotation.phenotype.label}}</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <pagination total-items="variationProfileTotal.total" ng-model="variationProfilePage" max-size="variationProfileMaxSize" class="pagination-sm" boundary-links="true" rotate="false"  items-per-page="variationProfileLimit" cg-busy="variationProfileTotal.$promise" ng-change="variationProfilePageChanged(variationProfilePage)"></pagination>
            </tab>
            <tab heading="Misc" active="tabs.misc.active" select="activateTab('misc')">
                <div class="panel panel-default top-buffer">
                    <div class="panel-body">
                        <a href="http://kb.phenoscape.org/kb/taxon/newick?iri={{taxonID | encodeURI}}">Get Newick tree for this taxon (based on the VTO classification)</a>
                    </div>
                </div>
            </tab>
        </tabset>
    </div>
</div>